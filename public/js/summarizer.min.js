!function(o){o.fn.summarize=function(a){var s=o.extend({summaryId:"#summary",fromHeading:2,toHeading:4,linkClass:""},a),t=0,r=0,l=0,n=s.fromHeading,m=/h(\d)/i;function u(a){return a.toLowerCase().replace(/ /g,"").replace(/[^\w-]+/g,"")}function d(a){return a.replace(/(<([^>]+)>)/gi,"")}o(s.summaryId).append("<ol></ol>"),this.children().each(function(){if(o(this).is("h"+n)){var a=o(this),e=d(a.html()),i=u(e);l=r=n,t++,o(s.summaryId+" ol").append('<li><a class="'+s.linkClass+'" href="#'+i+t+'">'+e+"</a></li>"),a.attr("id",i+t)}else if(m.test(o(this)[0].tagName)&&(l=o(this)[0].tagName.replace(m,"$1"),t++,l<=s.toHeading)){if(r<l){if(1<l-r)return alert("Summarizer cannot skip steps in incrementing headers. You jumped from H"+r+" to H"+l+"."),!1;o(s.summaryId+" li").last().append('<ul class="'+l+'ul"></ul>'),r=l}else l<r&&(r=l);e=d(o(this).html()),a=u(e);o(s.summaryId+" ."+l+"ul").last().append('<li><a class="'+s.linkClass+'" href="#'+a+t+'">'+e+"</a></li>"),o(this).attr("id",a+t)}})}}(jQuery);
